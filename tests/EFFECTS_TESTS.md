# 効果テストシナリオ

ブラウザで `http://localhost:8080` を開き、Reset（Debug）ボタンで毎回リセットして確認する。

---

## バッチ1（実装済み）

### E-B1-01: rush（R1）
1. rush バッジのある R1 カードを場に出す
2. **期待**: 召喚ターンに「ENTRY」が出ず、上スワイプで直接攻撃できる
3. **旧バグ確認**: input.js の修正後、rush カードが ENTRY 表示されないこと

### E-B1-02: strike2（R2） / strike3（R3）
1. strike2 カードで上スワイプ直接攻撃 → 相手 HP が **2 減る**こと
2. strike3 カードで同様 → 相手 HP が **3 減る**こと

### E-B1-03: edge1（R1） / edge2（R2）
1. edge1 カードをスロット 1 に置く
2. 左スワイプでスロット 0 の敵を攻撃する（端スロット）
3. **期待**: `2(L)+1 = 3` のように有効攻撃力が +1 上昇し、勝負に影響する
4. edge2 で同様に +2 を確認

### E-B1-04: edgewin（R3）
1. edgewin カードをスロット 3 に置く
2. 右スワイプで端スロット 4 の強敵（例: 6/6）を攻撃する
3. **期待**: 必ず勝利し敵が破壊される（自分の攻撃値に関係なく）

### E-B1-05: swap（R2）
1. スロット 1 と 3 に敵/味方カードを置いた状態でスロット 2 に swap カードを召喚
2. **期待**: スロット 1 と 3 のカードが入れ替わってアニメーションする

### E-B1-06: doublecenter（R3）
1. スロット 1・3 に敵カードが居る状態でスロット 2 に doublecenter を召喚（生贄必要）
2. **期待**: 召喚直後に DOUBLE HIT! テキストが出て両側を同時攻撃し、hasActedThisTurn = true になる
3. 攻撃後そのターン中に再攻撃しようとすると USED 表示になること

---

## バッチ2（今回実装）

### E-B2-01: rush バグ修正確認
1. rush R1 カードをドラッグしてフィールドにドロップ
2. **期待**: 召喚直後 READY 表示（ENTRY でない）、直接攻撃が即座に使用可能
3. 同ターン上スワイプ → 直接攻撃成立すること

### E-B2-02: doubleblade（R1/R2）— rush 動作
1. doubleblade R1 を召喚 → **期待**: READY 表示（召喚酔いなし）
2. 上スワイプで直接攻撃 → **期待**: 相手 HP -1 AND 自分 HP -1（RECOIL テキスト表示）
3. doubleblade R2 で同様に確認（ダメージは 1 のまま）

### E-B2-03: doubleblade — 致死判定
1. 自分 HP = 1 の状態で doubleblade 直接攻撃を行う
2. **期待**: 相手への 1 ダメージ後に自分も 1 ダメージ → 自分 HP 0 → 相手の WIN になる

### E-B2-04: weakaura（R1）— デバフ適用
1. weakaura R1 をスロット 2 に召喚
2. **期待**: スロット 1・3 のカードの攻撃値がオレンジ表示になり、表示値が -1 される
3. weakaura を破壊する（敵カードで攻撃させる等）
4. **期待**: 隣接カードの攻撃値が元の値（青/赤表示）に戻る

### E-B2-05: weakaura — 複数スタック
1. weakaura 2 枚をスロット 1・3 に置いた状態でスロット 2 にカードを置く
2. **期待**: スロット 2 のカードは両方の aura を受けて攻撃値が -2 される

### E-B2-06: offering（R1）— keep
1. offering R1 カードをドロップして召喚
2. **期待**: "OFFERING" オーバーレイが表示され、KEEP / OFFER ボタンが出る
3. KEEP をクリック → **期待**: オーバーレイが消え、カードは自分のまま（青枠）

### E-B2-07: offering（R1）— offer
1. offering 召喚後に OFFER ボタンをクリック
2. **期待**: カードの枠が赤（enemy）に変わる。そのカードは次のターンから敵として行動する

### E-B2-08: steal（R3）— 単体自動奪取
1. 隣接スロットに敵カードが 1 枚だけの状態で steal R3 を召喚（生贄処理後）
2. **期待**: STOLEN! テキストが表示され、対象カードの枠が青（player）に変わる
3. 次のターン、奪ったカードが自分のカードとして操作可能なこと

### E-B2-09: steal（R3）— 2 択選択 UI
1. 両隣（スロット 1・3）に敵カードが居る状態でスロット 2 に steal を召喚
2. **期待**: "STEAL" 選択オーバーレイが表示され LEFT / RIGHT ボタンが出る
3. LEFT を選択 → 左の敵カードが奪われ、RIGHT カードは敵のまま
4. 操作ロックが正しく解除され、通常のゲーム操作ができること

### E-B2-10: steal — 対象なし（効果不発）
1. 隣接する全スロットが空か自軍カードの状態で steal を召喚
2. **期待**: 何も起きず（テキストなし）、インタラクションロックが解除される

### E-B2-11: deathcurse（R2）— 勝者へのデバフ
1. deathcurse R2（3/4）をフィールドに置く
2. 敵カードに攻撃させて deathcurse カードを倒す
3. **期待**: "CURSE! -2" テキストが表示され、倒した敵カードの攻撃値が永続 -2 される（オレンジ表示）
4. 次のターンも攻撃値が減ったままであること

### E-B2-12: deathcurse — 引き分け時はデバフなし
1. 同じ攻撃値で対決させて両方消滅させる
2. **期待**: CURSE テキストが出ない（引き分け時は破壊者が存在しない）

### E-B2-13: harakiri（R3, 6/6）
1. harakiri を召喚（生贄 2 枚または R2 カード 1 枚が必要）
2. **期待**: 召喚直後に "HARAKIRI!" テキスト＋大きな画面シェイク
3. 自分のフィールド全カード（harakiri 自身含む）が消える
4. 手札のカードも消える
5. 相手のカードは残る
6. インタラクションロックが解除されターン終了ボタンが有効になる

### E-B2-14: harakiri — 空手札・空フィールド状態でも動作
1. フィールドに harakiri のみ（生贄で他が消えている）、手札 0 枚の状態で召喚
2. **期待**: harakiri 自身が消え、エラーなくゲームが継続する

---

## 共通チェック

### interactionLock 確認（全効果共通）
- 各効果発動後にカードを動かせないことを確認（ロック中）
- 効果解決後に正常に操作できることを確認（ロック解除）

### AI ターン確認
- 敵 AI が doubleblade / weakaura / deathcurse / steal / harakiri を持つ場合でも
  ゲームがフリーズしないこと（AI は自動で効果を処理する）
- 特に harakiri は AI が自ら全カードを破壊するため、その後ターンが正常終了すること
